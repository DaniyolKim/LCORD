webpackJsonp([1],{NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("7+uW"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var a=n("VU/8")({name:"App"},o,!1,function(e){n("ocKV")},null,null).exports,s=n("/ocq"),i={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("\n  "+this._s(this.userId)+"\n")])},staticRenderFns:[]};var u=n("VU/8")({name:"Login",props:["userId"],data:function(){return{}},methods:{hasCookie:function(){null==this.$cookie.get("userToken")?this.$router.push({name:"Login"}):this.userId=this.$cookie.get("userId")}},beforeMount:function(){this.hasCookie()}},i,!1,function(e){n("qycO")},"data-v-3aea5c41",null).exports,c=n("Xxa5"),p=n.n(c),d=n("exGp"),l=n.n(d),f={name:"Login",data:function(){return{loginParams:{userId:"",pwd:""}}},methods:{onSubmit:function(){var e=this;return l()(p.a.mark(function t(){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$cookie.delete("userToken"),e.$lcordAPI.getUserToken(e.loginParams).then(function(t){e.$lcordAPI.getUserInfo(e.loginParams.userId).then(function(t){e.$router.push({name:"Main"})})});case 2:case"end":return t.stop()}},t,e)}))()}},mounted:function(){}},m={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[n("div",[e._v("계정")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.loginParams.userId,expression:"loginParams.userId"}],attrs:{type:"text",placeholder:"user id"},domProps:{value:e.loginParams.userId},on:{input:function(t){t.target.composing||e.$set(e.loginParams,"userId",t.target.value)}}}),e._v(" "),n("div",[e._v("비밀번호")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.loginParams.pwd,expression:"loginParams.pwd"}],attrs:{type:"password",required:""},domProps:{value:e.loginParams.pwd},on:{input:function(t){t.target.composing||e.$set(e.loginParams,"pwd",t.target.value)}}}),e._v(" "),n("br"),e._v(" "),n("button",{staticStyle:{"font-size":"16px",height:"45px"},attrs:{type:"submit"}},[e._v("로그인")]),e._v(" "),n("div",{staticClass:"error-text"},[e._v(e._s(e.error))])])])},staticRenderFns:[]};var v=n("VU/8")(f,m,!1,function(e){n("a/xp")},"data-v-2a3f5f1e",null).exports;r.a.use(s.a);var h=new s.a({mode:"history",routes:[{path:"/",name:"Main",component:u},{path:"/login",name:"Login",component:v}]}),g=n("mtWM"),k=n.n(g),_={urls:{getToken:"http://localhost:3000/auth",getUser:"http://localhost:3000/users/"},comFunction:{}},I=n("K/Lq"),w=n.n(I);r.a.use(w.a);var x={apis:{getUserToken:function(e){var t=this;return l()(p.a.mark(function n(){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.a.post(_.urls.getToken,e).then(function(t){return k.a.defaults.withCredentials=!0,r.a.cookie.set("userId",e.userId,1),r.a.cookie.set("userToken",t.data.token,1),t.data}).catch(function(e){return e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},getUserInfo:function(e){var t=this;return l()(p.a.mark(function n(){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.a.get(_.urls.getUser+e,{headers:{Cookie:r.a.cookie.get("userToken")}}).then(function(e){return r.a.cookie.set("userId",loginInfo.userId,1),e.data}).catch(function(e){return e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()}}};r.a.prototype.$lcordAPI=x.apis,r.a.use(w.a),r.a.config.productionTip=!1,new r.a({el:"#app",router:h,components:{App:a},template:"<App/>"})},"a/xp":function(e,t){},ocKV:function(e,t){},qycO:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.591e932d982719474ee6.js.map